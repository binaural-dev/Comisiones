<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <data>
    
        <record id="view_account_move_form_igtf" model="ir.ui.view">
            <field name="name">view.account.move.form.igtf</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">

                <field name="country_code" position="after">
                    <field name="is_igtf" invisible="1" />
                </field>

                <xpath expr="//header/button[@name='action_register_payment']" position="after">
                    <button name="action_pay_igtf" string='Pagar IGTF' type="object" class="btn btn-primary" attrs="{'invisible': ['|','|','|',('move_type', 'not in', ('in_invoice','out_invoice','in_refund','out_refund')), ('state', '!=', 'posted'), ('amount_residual', '!=',0), ('igtf_debt_total','=',0)]}" />
                </xpath>

                 <xpath expr="//field[@name='invoice_vendor_bill_id']" position="after">
                    <field name="parent_id" />
                </xpath>

                <xpath expr="//field[@name='invoice_line_ids']" position="after">
                    <group class="oe_subtotal_footer ml-5 oe_left" col="2" attrs="{'invisible':[('is_igtf', '=', False)]}">
                        <field name="amount_total"/>
                        <field name="bi_igtf" />
                        <field name="igtf" />
                        <field name="igtf_amount_total" />
                        <field name="igtf_debt_total"  />
                    </group>       
                </xpath>
            
            </field>
        </record>
    
    </data>
    

</odoo>
